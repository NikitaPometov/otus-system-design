=== Расчеты показателей решения

==== Нагрузочные показатели

[arabic]
. MAU = 50 млн, DAU = 15 млн.
. Средняя сессия: 5 поисков + 1 заказ = 6 действий.
. Средний RPS: 6 * 15 млн / 86400 ≈ 1050 RPS.
. Пиковая нагрузка, K = 5: 1050 RPS * 5 = 5250 RPS.

==== Данные и хранение

[arabic]
. Карточки товаров в год: 4000.
.. Описание: 2 B * 250 * 4000 ≈ 2 MiB в год.
.. Картинки: 5 MiB * 2 * 4000 ≈ 40 GiB в год.
. Заказы за год: ≥150 B * 15 млн * 365 ≥ 760 GiB.
. Горизонт хранения: 10 лет.
. Полный объем заказов: 760 GiB/год * 10 лет ≥ 8 TiB.

==== Сетевой трафик

(суммарно для CDN)
[arabic]
. Средний размер ответа карточки (JSON + изображения): 8 KiB + 2 * 5 MiB ≈
11 MiB
. Средний размер ответа поиска (JSON списка + миниатюры): 15 * (2 KiB + 50 KiB)
≈ 780 КiB.
. Исходящий трафик: 1050 RPS * (11 MiB + 780 KiB * 5) / 6 MiB/R ≈ 2.6 GiB/s ≈
21 Gibps.
. Пиковый трафик, K = 5: 105 Gibps.

Для бэкенда. Hit-rate CDN = 0.99
[arabic]
. Средний размер ответа карточки (JSON + изображения):
8KiB + 2 * 5 MiB * 0.01 ≈ 120 KiB
. Средний размер ответа поиска (JSON списка + миниатюры): 15 * (2 KiB + 50
KiB * 0.01) ≈ 15 KiB.
. Исходящий трафик: 1050 RPS * (120 KiB + 15 KiB * 5) / 6 KiB/R ≈ 34 MiB/s =
272 Mibps
. Входящий трафик: 1050 RPS * размер_запроса = 1050 RPS * 2 KiB/R ≈ 2,1 MiB/s
 ≈ 17 Mibps.
. Пиковый трафик, K = 5: исходящий 1.4 Gibps, входящий 85 Mibps.

==== SLO/доступность

[arabic]
. Открытие карточки товара: 99% < 0.5 сек.
. Поиск по каталогу: 95% < 1.5 сек.
. Доступность системы: 99.9%.
. Непрерывность обслуживания: RTO = 1 ч, RPO = 5 мин.

