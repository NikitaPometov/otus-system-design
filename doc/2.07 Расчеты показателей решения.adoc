=== Расчеты показателей решения

==== Нагрузочные показатели

[arabic]
. MAU = 50 млн, DAU = 15 млн.
. Средняя сессия: 5 поисков + 1 заказ = 6 действий.
. Средний RPS: 6 * 15 млн / 86400 ≈ 1050 RPS.
. Пиковая нагрузка, K = 5: 1050 RPS * 5 = 5250 RPS.

==== Данные и хранение

[arabic]
. Карточки товаров в год: 4000.
.. Описание: 2 B * 250 * 4000 ≈ 2 MiB в год.
.. Картинки: 50 KiB * 2 * 4000 ≈ 400 MiB в год.
. Заказы за год: ≥150 B * 15 млн * 365 ≥ 760 GiB.
. Горизонт хранения: 10 лет.
. Полный объем заказов: 760 GiB/год * 10 лет ≥ 8 TiB.

==== Сетевой трафик

(суммарно для CDN)
[arabic]
. Средний размер ответа карточки (JSON + изображения): 8 KiB + 2 * 50 MiB ≈
101 MiB
. Средний размер ответа поиска (JSON списка + миниатюры): 15 * (2 KiB + 0.5 MiB)
≈ 8 MiB.
. Исходящий трафик: 1050 RPS * (101 MiB + 8 MiB * 5) / 6 MiB/R ≈ 25 GiB/s =
200 Gibps.
. Пиковый трафик, K = 5: 1 Tibps.

Для бэкенда. Hit-rate CDN = 0.99
[arabic]
. Средний размер ответа карточки (JSON + изображения):
8KiB + 2 * 50 MiB * 0.01 ≈ 1.5 MiB
. Средний размер ответа поиска (JSON списка + миниатюры): 15 * (2 KiB + 0.5
MiB * 0.01) ≈ 110 KiB.
. Исходящий трафик: 1050 RPS * (1.5 MiB + 110 KiB * 5) / 6 MiB/R ≈ 2 GiB/s =
16 Gibps
. Входящий трафик: 1050 RPS * размер_запроса = 1050 RPS * 2 KiB/R ≈ 2,1 MiB/s
 ≈ 17 Mibps.
. Пиковый трафик, K = 5: исходящий 80 Gibps, входящий 85 Mibps.

==== SLO/доступность

[arabic]
. Открытие карточки товара: 90% < 0.5 сек.
. Поиск по каталогу: 90% < 1.5 сек.
. Доступность системы: 99.9%.
. Непрерывность обслуживания: RTO = 1 ч, RPO = 5 мин.

